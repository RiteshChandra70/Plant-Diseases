
 <!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plant Disease Detection - AI-Powered Analysis</title>

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <style>
    
      body {
        background: linear-gradient(135deg, #e8f5e9, #f1f8e9);
        font-family: 'Poppins', sans-serif;
        color: #333;
      }

      .navbar {
        background-color: #2e7d32;
        color: white;
        border-bottom: 3px solid #1b5e20;
      }

      .navbar-brand {
        color: white !important;
        font-weight: 600;
        font-size: 1.25rem;
      }

      .brand-mark {
        font-size: 1.4rem;
      }

      .card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        background: white;
      }

      .drop-area {
        border: 2px dashed #81c784;
        border-radius: 12px;
        background: #f9fff9;
        transition: all 0.3s ease;
      }

      .drop-area.dragover {
        border-color: #388e3c;
        background-color: #e8f5e9;
      }

      .btn-upload {
        background-color: #66bb6a;
        color: white;
        font-weight: 500;
        border-radius: 30px;
        padding: 10px 20px;
        transition: all 0.3s ease;
      }

      .btn-upload:hover {
        background-color: #388e3c;
        transform: translateY(-2px);
      }

      .btn-success {
        border-radius: 30px;
        background: linear-gradient(90deg, #43a047, #66bb6a);
        border: none;
        transition: all 0.3s ease;
      }

      .btn-success:hover {
        background: linear-gradient(90deg, #2e7d32, #43a047);
        transform: scale(1.03);
      }

      .btn-outline-secondary {
        border-radius: 30px;
      }

      .preview-wrap {
        background: #f9fbe7;
        border-radius: 10px;
        padding: 20px;
      }

      .img-frame {
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        overflow: hidden;
      }

      footer {
        margin-top: 60px;
        color: #666;
      }

      footer code {
        background: #e8f5e9;
        color: #2e7d32;
        border-radius: 5px;
        padding: 2px 6px;
      }

      
      #loadingOverlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }

      .loading-inner {
        text-align: center;
      }

      .border-dashed {
        border: 2px dashed #ccc;
      }

      .border-start-4 {
        border-left-width: 6px !important;
      }

      .border-success {
        border-color: #43a047 !important;
      }

     
      .fade-in {
        animation: fadeIn 0.6s ease forwards;
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
    </style>

    <script>
      
      function previewFile(input) {
        const file = input && input.files && input.files[0];
        const preview = document.getElementById('imgPreview');
        const wrap = document.getElementById('previewWrap');
        if (!file) {
          preview.src = '';
          wrap.classList.add('d-none');
          return;
        }
        const reader = new FileReader();
        reader.onload = function(e) {
          preview.src = e.target.result;
          wrap.classList.remove('d-none');
          wrap.classList.add('fade-in');
        }
        reader.readAsDataURL(file);
      }

      function clearPreview() {
        const fileInput = document.getElementById('file');
        if (fileInput) {
          try { fileInput.value = ''; } catch(e) {}
        }
        const wrap = document.getElementById('previewWrap');
        const preview = document.getElementById('imgPreview');
        if (preview) preview.src = '';
        if (wrap) wrap.classList.add('d-none');
      }

      function enableDnD() {
        const drop = document.getElementById('dropArea');
        if (!drop) return;
        ['dragenter', 'dragover'].forEach(ev => {
          drop.addEventListener(ev, e => {
            e.preventDefault();
            drop.classList.add('dragover');
          });
        });
        ['dragleave', 'drop'].forEach(ev => {
          drop.addEventListener(ev, e => {
            e.preventDefault();
            drop.classList.remove('dragover');
          });
        });
        drop.addEventListener('drop', e => {
          const files = e.dataTransfer && e.dataTransfer.files;
          if (files && files.length) {
            const fileInput = document.getElementById('file');
            try { fileInput.files = files; } catch (err) {}
            previewFile(fileInput);
          }
        });
      }

      function showLoading() {
        const ov = document.getElementById('loadingOverlay');
        if (ov) ov.classList.remove('d-none');
      }

      document.addEventListener('DOMContentLoaded', enableDnD);
    </script>
  </head>

  <body>
  
    <nav class="navbar navbar-expand-lg px-4 py-3">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="#">
          <span class="brand-mark">ðŸŒ¿</span>
          <span class="brand-title"  style="color:#1b5e20;">Plant Disease Detector</span>
        </a>
      </div>
    </nav>

    <main class="container py-5">
      <header class="text-center mb-5">
        <h1 class="display-6 mb-3 text-success">Plant Disease Detection</h1>
        <p class="lead text-muted mb-0">
          Upload a photo of your plant's leaf and get an instant AI-powered diagnosis
        </p>
      </header>

      <div class="card p-4 p-lg-5">
        <div class="row g-4 align-items-start">
       
          <div class="col-lg-5">
            <form action="/predict" method="post" enctype="multipart/form-data"
                  class="h-100 d-flex flex-column gap-4" onsubmit="showLoading()"
                  aria-label="Upload form">
              <div id="dropArea" class="drop-area p-4 text-center">
                <i class="fas fa-leaf fa-2x mb-3 text-success opacity-75"></i>
                <p class="h6 mb-2">Drag & drop your image here</p>
                <p class="small text-muted mb-3">or</p>
                <input class="form-control d-none" type="file" id="file" name="file"
                       accept="image/*" onchange="previewFile(this)" required>
                <label for="file" class="btn btn-upload" role="button" aria-haspopup="file">
                  <i class="fas fa-upload me-2"></i>Choose a file
                </label>
                <div class="form-text mt-3 text-muted small">
                  <i class="fas fa-info-circle me-1"></i>
                  Supported formats: JPG, PNG
                </div>
              </div>

              <div class="mt-auto d-flex gap-3">
                <button type="submit" class="btn btn-success flex-grow-1">
                  <i class="fas fa-magnifying-glass me-2"></i>Analyze Leaf
                </button>
                <button type="button" class="btn btn-outline-secondary"
                        onclick="clearPreview();">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </form>
          </div>

          
          <div class="col-lg-7">
            <div id="previewWrap" class="preview-wrap d-none fade-in">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h6 class="mb-0">
                  <i class="fas fa-image me-2 text-success"></i>Preview
                </h6>
                <span class="badge bg-light text-muted">
                  <i class="fas fa-eye me-1"></i>Client-side preview
                </span>
              </div>
              <div class="img-frame mb-4">
                <img id="imgPreview" class="img-fluid rounded" src="" alt="Leaf preview" />
              </div>
            </div>

            {% if result %}
            <div class="alert alert-light border-start-4 border-success p-4 fade-in">
              <div class="d-flex align-items-center gap-3">
                <div class="result-icon">
                  <i class="fas fa-check-circle fa-2x text-success"></i>
                </div>
                <div>
                  <div class="text-muted mb-1">Analysis Result</div>
                  <div class="h5 mb-0">{{ result }}</div>
                </div>
              </div>
            </div>
            {% else %}
            <div class="card text-center p-4 border-dashed fade-in">
              <i class="fas fa-seedling fa-2x mb-3 text-muted opacity-50"></i>
              <h6 class="mb-2">No Analysis Yet</h6>
              <p class="text-muted mb-0">Upload a leaf image and click Analyze to get started</p>
            </div>
            {% endif %}
          </div>
        </div>
      </div>

      
      <footer class="mt-5 text-center">
        <p class="text-muted small mb-0">
          <i class="fas fa-code me-2"></i>
          Powered by AI â€¢ Ensure <code>plant_disease_model.pth</code> is present
        </p>
      </footer>
    </main>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    
    <div id="loadingOverlay" class="d-none">
      <div class="loading-inner">
        <div class="spinner-border text-light" role="status" style="width:3rem; height:3rem">
          <span class="visually-hidden">Loading...</span>
        </div>
        <div class="mt-3 text-light">Analyzing image...</div>
      </div>
    </div>
  </body>
</html>